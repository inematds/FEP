<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do T√≥pico | FEP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Estilos para conte√∫do Markdown */
        .markdown-content h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #1f2937;
        }
        .markdown-content h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-top: 2.5rem;
            margin-bottom: 1rem;
            color: #1f2937;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
        .markdown-content h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 2rem;
            margin-bottom: 0.75rem;
            color: #374151;
        }
        .markdown-content h4 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            color: #4b5563;
        }
        .markdown-content p {
            margin-bottom: 1rem;
            line-height: 1.8;
            color: #4b5563;
        }
        .markdown-content ul, .markdown-content ol {
            margin-bottom: 1rem;
            padding-left: 2rem;
        }
        .markdown-content li {
            margin-bottom: 0.5rem;
            line-height: 1.7;
        }
        .markdown-content pre {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 1.5rem 0;
        }
        .markdown-content code {
            background-color: #f3f4f6;
            color: #dc2626;
            padding: 0.2rem 0.5rem;
            border-radius: 0.25rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            color: #e2e8f0;
            padding: 0;
        }
        .markdown-content strong {
            font-weight: 700;
            color: #1f2937;
        }
        .markdown-content em {
            font-style: italic;
            color: #6b7280;
        }
        .markdown-content blockquote {
            border-left: 4px solid #3b82f6;
            padding-left: 1.5rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: #6b7280;
            background-color: #eff6ff;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
        }
        .markdown-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            font-size: 0.95rem;
        }
        .markdown-content th, .markdown-content td {
            border: 1px solid #e5e7eb;
            padding: 0.75rem;
            text-align: left;
        }
        .markdown-content th {
            background-color: #f9fafb;
            font-weight: 600;
            color: #374151;
        }
        .markdown-content tr:hover {
            background-color: #f9fafb;
        }
        .markdown-content hr {
            border: none;
            border-top: 2px solid #e5e7eb;
            margin: 3rem 0;
        }
        .markdown-content a {
            color: #3b82f6;
            text-decoration: underline;
        }
        .markdown-content a:hover {
            color: #2563eb;
        }

        /* Loading animation */
        .loader {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="font-['Inter'] bg-gray-50">
    <!-- Navega√ß√£o -->
    <nav class="sticky top-0 z-50 bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <a href="index.html" class="flex items-center space-x-2">
                    <span class="text-2xl font-bold text-blue-600">FEP</span>
                    <span class="text-sm text-gray-600 hidden md:inline">Engenharia de Prompt</span>
                </a>
                <div class="flex gap-4">
                    <a href="javascript:history.back()" class="text-blue-600 hover:text-blue-700">‚Üê Voltar</a>
                    <a href="nivel-tecnico.html" class="text-blue-600 hover:text-blue-700">N√≠vel T√©cnico</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header do T√≥pico -->
    <div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto">
                <div class="text-6xl mb-4" id="topicoIcon">üìã</div>
                <h1 class="text-4xl md:text-5xl font-bold mb-4" id="topicoTitulo">Carregando...</h1>
                <p class="text-blue-100 text-lg" id="topicoMeta">
                    <span id="topicoNivel"></span> ‚Ä¢ M√≥dulo <span id="topicoModulo"></span>
                </p>
            </div>
        </div>
    </div>

    <!-- Introdu√ß√£o -->
    <div class="bg-white py-8 border-b">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto">
                <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg" id="topicoIntroducao">
                    <p class="text-lg text-gray-700 leading-relaxed"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Conte√∫do Principal -->
    <div class="container mx-auto px-4 py-12">
        <div class="max-w-4xl mx-auto">
            <!-- Loading State -->
            <div id="loadingState" class="text-center py-16">
                <div class="loader mx-auto mb-4"></div>
                <p class="text-gray-600 text-lg">Carregando conte√∫do completo...</p>
            </div>

            <!-- Error State -->
            <div id="errorState" class="hidden bg-red-50 border-l-4 border-red-500 p-6 rounded-lg">
                <h3 class="text-red-800 font-bold text-lg mb-2">‚ö†Ô∏è Erro ao Carregar Conte√∫do</h3>
                <p class="text-red-700" id="errorMessage"></p>
                <button onclick="location.reload()" class="mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                    üîÑ Tentar Novamente
                </button>
            </div>

            <!-- Conte√∫do do Markdown -->
            <div id="conteudoMarkdown" class="markdown-content bg-white rounded-lg shadow-sm p-8 hidden">
                <!-- Conte√∫do ser√° inserido aqui -->
            </div>

            <!-- Se√ß√µes Adicionais -->
            <div id="secoesAdicionais" class="hidden mt-8 space-y-8">
                <!-- Exemplos -->
                <div id="exemplosSection" class="bg-white rounded-lg shadow-sm p-8"></div>

                <!-- Casos de Uso -->
                <div id="casosUsoSection" class="bg-white rounded-lg shadow-sm p-8"></div>

                <!-- Dicas Pr√°ticas -->
                <div id="dicasSection" class="bg-white rounded-lg shadow-sm p-8"></div>

                <!-- Erros Comuns -->
                <div id="errosSection" class="bg-white rounded-lg shadow-sm p-8"></div>

                <!-- Recursos Adicionais -->
                <div id="recursosSection" class="bg-white rounded-lg shadow-sm p-8"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-16">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-400">¬© 2024 FEP - Fundamentos de Engenharia de Prompt</p>
            <p class="text-gray-500 text-sm mt-2">Conte√∫do gerado com Claude Code</p>
        </div>
    </footer>

    <script src="topicos-data.js"></script>
    <!-- Marked.js para parsing de Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        (function() {
            'use strict';

            // Pegar ID do t√≥pico da URL
            const urlParams = new URLSearchParams(window.location.search);
            const topicoId = urlParams.get('id');

            if (!topicoId) {
                mostrarErro('Nenhum t√≥pico especificado na URL');
                return;
            }

            const topico = topicosData[topicoId];

            if (!topico) {
                mostrarErro(`T√≥pico "${topicoId}" n√£o encontrado`);
                return;
            }

            // Preencher header
            document.getElementById('topicoIcon').textContent = topico.icon;
            document.getElementById('topicoTitulo').textContent = topico.titulo;
            document.getElementById('topicoNivel').textContent = topico.nivel;
            document.getElementById('topicoModulo').textContent = topico.modulo;
            document.getElementById('topicoIntroducao').querySelector('p').textContent = topico.introducao;

            // Atualizar t√≠tulo da p√°gina
            document.title = `${topico.titulo} | FEP`;

            // Carregar conte√∫do
            carregarConteudo();

            async function carregarConteudo() {
                try {
                    const conteudoDiv = document.getElementById('conteudoMarkdown');

                    if (topico.conteudoArquivo) {
                        // Carregar arquivo markdown
                        const response = await fetch(topico.conteudoArquivo);
                        if (!response.ok) throw new Error('Arquivo n√£o encontrado');

                        const markdownText = await response.text();
                        conteudoDiv.innerHTML = marked.parse(markdownText);
                    } else if (topico.conteudoCompleto) {
                        // Usar conte√∫do inline (fallback para t√≥picos antigos)
                        conteudoDiv.innerHTML = marked.parse(topico.conteudoCompleto);
                    } else {
                        throw new Error('Nenhum conte√∫do dispon√≠vel para este t√≥pico');
                    }

                    // Esconder loading, mostrar conte√∫do
                    document.getElementById('loadingState').style.display = 'none';
                    conteudoDiv.classList.remove('hidden');

                    // Renderizar se√ß√µes adicionais
                    renderizarSecoesAdicionais();

                } catch (error) {
                    console.error('Erro ao carregar conte√∫do:', error);
                    mostrarErro(`Erro ao carregar conte√∫do: ${error.message}`);
                }
            }

            function renderizarSecoesAdicionais() {
                const container = document.getElementById('secoesAdicionais');
                let temConteudo = false;

                // Renderizar exemplos
                if (topico.exemplos && topico.exemplos.length > 0) {
                    renderizarExemplos();
                    temConteudo = true;
                }

                // Renderizar casos de uso
                if (topico.casosDeUso && topico.casosDeUso.length > 0) {
                    renderizarCasosUso();
                    temConteudo = true;
                }

                // Renderizar dicas
                if (topico.dicasPraticas && topico.dicasPraticas.length > 0) {
                    renderizarDicas();
                    temConteudo = true;
                }

                // Renderizar erros
                if (topico.errosComuns && topico.errosComuns.length > 0) {
                    renderizarErros();
                    temConteudo = true;
                }

                // Renderizar recursos
                if (topico.recursosAdicionais && topico.recursosAdicionais.length > 0) {
                    renderizarRecursos();
                    temConteudo = true;
                }

                if (temConteudo) {
                    container.classList.remove('hidden');
                }
            }

            function renderizarExemplos() {
                const section = document.getElementById('exemplosSection');
                let html = '<h2 class="text-3xl font-bold mb-6 text-gray-900">üí° Exemplos Pr√°ticos</h2>';

                topico.exemplos.forEach(exemplo => {
                    html += `
                        <div class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-6 mb-6 border-l-4 border-green-500">
                            <h3 class="text-xl font-bold text-gray-900 mb-3">${exemplo.titulo}</h3>
                            ${exemplo.contexto ? `<p class="text-sm text-gray-600 mb-4 italic">${exemplo.contexto}</p>` : ''}

                            ${exemplo.semDecomposicao ? `
                                <div class="mb-4">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="text-red-600 font-semibold">‚ùå Sem a t√©cnica:</span>
                                    </div>
                                    <pre class="bg-red-50 p-4 rounded-lg text-sm border border-red-200 overflow-x-auto whitespace-pre-wrap">${exemplo.semDecomposicao}</pre>
                                </div>
                            ` : ''}

                            ${exemplo.comDecomposicao || exemplo.chainCompleto ? `
                                <div class="mb-4">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="text-green-600 font-semibold">‚úÖ Com a t√©cnica:</span>
                                    </div>
                                    <pre class="bg-white p-4 rounded-lg text-sm border border-green-200 overflow-x-auto whitespace-pre-wrap">${exemplo.comDecomposicao || exemplo.chainCompleto}</pre>
                                </div>
                            ` : ''}

                            ${exemplo.resultado || exemplo.beneficio ? `
                                <div class="bg-blue-100 p-4 rounded-lg mt-4">
                                    <span class="font-semibold text-blue-900">üéØ Resultado:</span>
                                    <span class="text-blue-800"> ${exemplo.resultado || exemplo.beneficio}</span>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });

                section.innerHTML = html;
            }

            function renderizarCasosUso() {
                const section = document.getElementById('casosUsoSection');
                let html = '<h2 class="text-3xl font-bold mb-6 text-gray-900">üéØ Casos de Uso</h2>';
                html += '<div class="grid md:grid-cols-2 gap-4">';

                topico.casosDeUso.forEach(caso => {
                    html += `
                        <div class="bg-purple-50 rounded-lg p-5 border-l-4 border-purple-500">
                            <div class="font-bold text-purple-900 mb-2 text-lg">${caso.area}</div>
                            <div class="text-sm text-gray-700 mb-2 font-semibold">${caso.aplicacao}</div>
                            <div class="text-sm text-gray-600">${caso.detalhes}</div>
                        </div>
                    `;
                });

                html += '</div>';
                section.innerHTML = html;
            }

            function renderizarDicas() {
                const section = document.getElementById('dicasSection');
                let html = '<h2 class="text-3xl font-bold mb-6 text-gray-900">‚≠ê Dicas Pr√°ticas</h2>';
                html += '<div class="space-y-3">';

                topico.dicasPraticas.forEach(dica => {
                    html += `
                        <div class="flex items-start gap-3 bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400">
                            <span class="text-yellow-600 text-xl flex-shrink-0">üí°</span>
                            <span class="text-gray-700">${dica}</span>
                        </div>
                    `;
                });

                html += '</div>';
                section.innerHTML = html;
            }

            function renderizarErros() {
                const section = document.getElementById('errosSection');
                let html = '<h2 class="text-3xl font-bold mb-6 text-gray-900">‚ö†Ô∏è Erros Comuns</h2>';
                html += '<div class="space-y-4">';

                topico.errosComuns.forEach(erro => {
                    html += `
                        <div class="bg-red-50 rounded-lg p-5 border-l-4 border-red-500">
                            <div class="font-bold text-red-900 mb-3 text-lg">‚ùå ${erro.erro}</div>
                            ${erro.exemplo ? `<div class="text-sm text-gray-600 mb-3 italic bg-white p-3 rounded">üí≠ Exemplo: ${erro.exemplo}</div>` : ''}
                            <div class="text-sm text-green-800 bg-green-50 p-3 rounded border border-green-200">
                                <strong>‚úì Solu√ß√£o:</strong> ${erro.solucao}
                            </div>
                        </div>
                    `;
                });

                html += '</div>';
                section.innerHTML = html;
            }

            function renderizarRecursos() {
                const section = document.getElementById('recursosSection');
                let html = '<h2 class="text-3xl font-bold mb-6 text-gray-900">üìö Recursos Adicionais</h2>';
                html += '<ul class="space-y-3">';

                topico.recursosAdicionais.forEach(recurso => {
                    html += `
                        <li class="flex items-start gap-3 text-gray-700 p-3 hover:bg-gray-50 rounded-lg transition-colors">
                            <span class="flex-shrink-0 text-blue-600">‚Üí</span>
                            <span>${recurso}</span>
                        </li>
                    `;
                });

                html += '</ul>';
                section.innerHTML = html;
            }

            function mostrarErro(mensagem) {
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('errorState').classList.remove('hidden');
                document.getElementById('errorMessage').textContent = mensagem;
            }
        })();
    </script>
</body>
</html>
